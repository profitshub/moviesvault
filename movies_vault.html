<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MovieVault - Unlimited Movie Access</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0f0f23, #1a1a2e, #16213e);
            color: white;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .background-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.1;
        }

        .floating-particles {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .particle {
            position: absolute;
            background: rgba(229, 9, 20, 0.3);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
        }

        .header {
            margin-bottom: 60px;
            padding-top: 40px;
        }

        .logo {
            font-size: 3.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #e50914, #ff6b6b, #ee5a24);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { filter: drop-shadow(0 0 10px rgba(229, 9, 20, 0.5)); }
            to { filter: drop-shadow(0 0 20px rgba(229, 9, 20, 0.8)); }
        }

        .tagline {
            font-size: 1.3rem;
            color: #ccc;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1rem;
            color: #888;
            margin-bottom: 40px;
        }

        .search-section {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 60px 40px;
            margin: 40px auto;
            max-width: 600px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .search-container {
            position: relative;
            margin-bottom: 30px;
        }

        .search-input {
            width: 100%;
            padding: 20px 60px 20px 20px;
            font-size: 1.2rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            outline: none;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: #e50914;
            box-shadow: 0 0 20px rgba(229, 9, 20, 0.3);
            transform: scale(1.02);
        }

        .search-input::placeholder {
            color: #aaa;
        }

        .search-btn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(45deg, #e50914, #ff3333);
            border: none;
            padding: 12px 20px;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 5px 15px rgba(229, 9, 20, 0.4);
        }

        .loading-container {
            display: none;
            margin: 30px 0;
        }

        .loading-text {
            font-size: 1.1rem;
            margin-bottom: 20px;
            color: #e50914;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #e50914, #ff6b6b);
            width: 0%;
            animation: loading 3s ease-in-out;
        }

        @keyframes loading {
            0% { width: 0%; }
            30% { width: 40%; }
            70% { width: 80%; }
            100% { width: 100%; }
        }

        .loading-messages {
            margin-top: 20px;
            font-size: 0.9rem;
            color: #ccc;
        }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: modalPop 0.4s ease forwards;
        }

        @keyframes modalPop {
            to {
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .modal-title {
            font-size: 1.8rem;
            color: #e50914;
            margin-bottom: 20px;
        }

        .modal-text {
            font-size: 1.1rem;
            margin-bottom: 30px;
            color: #ccc;
        }

        .download-btn {
            background: linear-gradient(45deg, #e50914, #ff3333);
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .download-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(229, 9, 20, 0.4);
        }

        .verification-page {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .verification-title {
            font-size: 2.5rem;
            color: #e50914;
            margin-bottom: 30px;
        }

        .verification-text {
            font-size: 1.2rem;
            margin-bottom: 40px;
            color: #ccc;
            line-height: 1.6;
        }

        .cpa-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 30px;
            margin: 30px auto;
            max-width: 400px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .share-section {
            margin-top: 60px;
            padding: 40px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
        }

        .share-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #e50914;
        }

        .share-btn {
            background: #1877f2;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            margin: 10px;
            transition: transform 0.3s ease;
        }

        .share-btn:hover {
            transform: scale(1.05);
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @media (max-width: 768px) {
            .logo { font-size: 2.5rem; }
            .search-section { padding: 40px 20px; }
            .modal { padding: 30px 20px; }
            .footer-content { 
                flex-direction: column; 
                text-align: center;
            }
            .footer-section { 
                margin-bottom: 30px; 
            }
            .footer-stats { 
                justify-content: center; 
            }
        }

        /* Footer Styles */
        .footer {
            background: linear-gradient(135deg, #0a0a1a, #1a1a2e);
            border-top: 1px solid rgba(229, 9, 20, 0.3);
            margin-top: 60px;
            padding: 50px 0 20px;
            color: #ccc;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 40px;
            padding: 0 20px;
        }

        .footer-section h3,
        .footer-section h4 {
            color: #e50914;
            margin-bottom: 20px;
            font-size: 1.2rem;
        }

        .footer-logo {
            font-size: 2rem;
            font-weight: bold;
            background: linear-gradient(45deg, #e50914, #ff6b6b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .footer-description {
            margin-bottom: 25px;
            line-height: 1.6;
            color: #aaa;
        }

        .footer-stats {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .stat {
            text-align: center;
        }

        .stat-number {
            display: block;
            font-size: 1.5rem;
            font-weight: bold;
            color: #e50914;
        }

        .stat-label {
            font-size: 0.8rem;
            color: #888;
        }

        .footer-links {
            list-style: none;
            padding: 0;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-links a:hover {
            color: #e50914;
            cursor: pointer;
        }

        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 40px;
            padding-top: 20px;
        }

        .footer-bottom-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .footer-badges {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .badge {
            background: rgba(229, 9, 20, 0.1);
            border: 1px solid rgba(229, 9, 20, 0.3);
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            color: #e50914;
        }
    </style>
</head>
<body>
    <div class="background-animation">
        <div class="floating-particles" id="particles"></div>
    </div>

    <div class="container" id="mainPage">
        <div class="header">
            <h1 class="logo">MovieVault</h1>
            <p class="tagline">Unlimited Access to Premium Movies</p>
            <p class="subtitle">Search and download any movie instantly</p>
        </div>

        <div class="search-section pulse">
            <div class="search-container">
                <input type="text" class="search-input" id="movieInput" placeholder="Enter movie title..." />
                <button class="search-btn" onclick="searchMovie()">üîç</button>
            </div>
            
            <div class="loading-container" id="loadingContainer">
                <div class="loading-text" id="loadingText">Searching movie database...</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="loading-messages" id="loadingMessages"></div>
            </div>
        </div>

        <div class="share-section">
            <h3 class="share-title">üé¨ Share with Friends!</h3>
            <p style="margin-bottom: 20px; color: #ccc;">Help others discover unlimited movies</p>
            <button class="share-btn" onclick="shareToFacebook()">üìò Share on Facebook</button>
            <button class="share-btn" style="background: #1da1f2;" onclick="shareToTwitter()">üê¶ Share on Twitter</button>
        </div>
    </div>

    <div class="modal-overlay" id="modalOverlay">
        <div class="modal">
            <h2 class="modal-title">üéâ Movie Found!</h2>
            <p class="modal-text" id="modalText">Great news! Your movie is available for download.</p>
            <button class="download-btn" onclick="proceedToVerification()">Continue to Download</button>
        </div>
    </div>

    <div class="verification-page" id="verificationPage">
        <h1 class="verification-title">üîê Human Verification</h1>
        <p class="verification-text">
            We've been experiencing high traffic and want to ensure you're human.<br>
            Please complete a quick verification to access your movie download.
        </p>
        
        <div class="cpa-container">
            <h3 style="color: #e50914; margin-bottom: 20px;">Quick Verification Required</h3>
            <p style="margin-bottom: 20px; color: #ccc;">Complete one offer below to verify:</p>
            
            <div id="cpaOffers">
                <!-- CPA offers will be loaded here -->
                <p style="color: #aaa;">Loading verification options...</p>
            </div>
        </div>

        <div style="margin-top: 40px; padding: 20px; background: rgba(255,255,255,0.05); border-radius: 10px;">
            <p style="color: #ccc; font-size: 0.9rem;">
                After verification, you'll join our exclusive Telegram community for instant movie access.
            </p>
        </div>
    </div>

    <script>
        // Initialize particles
        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.width = Math.random() * 10 + 5 + 'px';
                particle.style.height = particle.style.width;
                particle.style.animationDelay = Math.random() * 6 + 's';
                container.appendChild(particle);
            }
        }

        // Check URL parameters for movie title
        function checkUrlParams() {
            const urlParams = new URLSearchParams(window.location.search);
            const movie = urlParams.get('movie');
            if (movie) {
                document.getElementById('movieInput').value = decodeURIComponent(movie);
                setTimeout(() => searchMovie(), 1000);
            }
        }

        // Search movie function
        function searchMovie() {
            const movieTitle = document.getElementById('movieInput').value.trim();
            if (!movieTitle) return;

            // Show loading
            document.getElementById('loadingContainer').style.display = 'block';
            
            const loadingMessages = [
                "Scanning global movie database...",
                "Checking HD quality availability...",
                "Verifying download servers...",
                "Preparing secure download link...",
                "Almost ready..."
            ];

            let messageIndex = 0;
            const messageInterval = setInterval(() => {
                if (messageIndex < loadingMessages.length) {
                    document.getElementById('loadingMessages').textContent = loadingMessages[messageIndex];
                    messageIndex++;
                } else {
                    clearInterval(messageInterval);
                }
            }, 600);

            // Always "find" the movie after 3 seconds
            setTimeout(() => {
                document.getElementById('loadingContainer').style.display = 'none';
                showMovieFoundModal(movieTitle);
            }, 3000);
        }

        // Show movie found modal
        function showMovieFoundModal(movieTitle) {
            document.getElementById('modalText').textContent = 
                `"${movieTitle}" is available in HD quality. Click below to proceed with the download.`;
            document.getElementById('modalOverlay').style.display = 'block';
        }

        // Proceed to verification
        function proceedToVerification() {
            document.getElementById('modalOverlay').style.display = 'none';
            document.getElementById('mainPage').style.display = 'none';
            document.getElementById('verificationPage').style.display = 'block';
            
            // Load CPA offers (placeholder - you'll need to integrate real offers)
            setTimeout(() => {
                loadCPAOffers();
            }, 1000);
        }

        /**
         * CPA Network Integration
         */        const CPA_CONFIG = {
            user_id: '168038',
            key: 'c7839a1512ea66f688e4b56a6e8f0f64',
            domain: 'singingfiles.com',
            baseUrl: 'https://www.cpagrip.com/common/offer_feed_json.php'
        };

        // Generate unique tracking ID
        function generateTrackingId() {
            const timestamp = new Date().getTime();
            const random = Math.random().toString(36).substring(2, 10);
            return `${timestamp}_${random}`;
        }

        // Device detection
        function detectDeviceType() {
            const userAgent = navigator.userAgent.toLowerCase();
            if (/iphone|ipad|ipod/.test(userAgent)) {
                return 'ios';
            } else if (/android/.test(userAgent)) {
                return 'android';
            } else {
                return 'desktop';
            }
        }

        // Get user location (using IP geolocation)
        async function getUserLocation() {
            try {
                const response = await fetch('https://ipapi.co/json/');
                const data = await response.json();
                return {
                    city: data.city || 'Unknown',
                    country: data.country_name || 'Unknown',
                    countryCode: data.country_code || 'US'
                };
            } catch (error) {
                return {
                    city: 'New York',
                    country: 'United States',
                    countryCode: 'US'
                };
            }
        }        // Fetch offers from CPA network using JSON feed
        async function fetchOffers(deviceType, countryCode) {
            const trackingId = generateTrackingId();
            
            let url = `${CPA_CONFIG.baseUrl}?user_id=${CPA_CONFIG.user_id}&pubkey=${CPA_CONFIG.key}&tracking_id=${trackingId}`;
            
            if (deviceType === 'ios') {
                url += '&device=ios';
            } else if (deviceType === 'android') {
                url += '&device=android';
            }
            
            if (countryCode) {
                url += `&country=${countryCode}`;
            }
            
            try {
                const response = await fetch(url);
                const data = await response.json();
                return processJsonOffers(data);
            } catch (error) {
                console.error('Error fetching offers:', error);
                return getFallbackOffers(deviceType);
            }
        }

        // Process JSON offers data
        function processJsonOffers(data) {
            if (!Array.isArray(data)) {
                return [];
            }
            
            return data
                .filter(offer => offer && offer.offer_id)
                .map(offer => ({
                    offer_id: offer.offer_id,
                    offer_name: offer.offer_title || 'Special Offer',
                    description: offer.offer_desc || 'Complete this offer to verify',
                    payout: offer.payout || 'Premium',
                    offer_url: offer.offer_url || '#',
                    network_name: offer.network_name || 'Partner Network'
                }))
                .sort((a, b) => parseFloat(b.payout) - parseFloat(a.payout));
        }

        // Fallback offers
        function getFallbackOffers(deviceType) {
            const fallbacks = {
                ios: [
                    {
                        offer_id: 'ios_fallback',
                        offer_name: 'Premium iOS Entertainment',
                        description: 'Get exclusive access to premium iOS entertainment apps',
                        payout: '3.50',
                        offer_url: '#'
                    }
                ],
                android: [
                    {
                        offer_id: 'android_fallback',
                        offer_name: 'Android Gaming Bundle',
                        description: 'Download exclusive Android games and entertainment',
                        payout: '2.75',
                        offer_url: '#'
                    }
                ],
                desktop: [
                    {
                        offer_id: 'desktop_fallback',
                        offer_name: 'Premium Streaming Access',
                        description: 'Get unlimited access to premium streaming content',
                        payout: '4.00',
                        offer_url: '#'
                    }
                ]
            };
            
            return fallbacks[deviceType] || fallbacks.desktop;
        }

        // Track offer clicks
        function trackOfferClick(deviceType, offerId) {
            const trackingData = {
                offer_id: offerId,
                device_type: deviceType,
                timestamp: new Date().toISOString(),
                session_id: sessionStorage.getItem('session_id') || 'unknown',
                movie_searched: document.getElementById('movieInput').value
            };
            
            console.log('Offer clicked:', trackingData);
            
            // Store conversion data
            localStorage.setItem('conversion_data', JSON.stringify(trackingData));
            
            return true;
        }

        // Enhanced CPA offers loading
        async function loadCPAOffers() {
            const offersContainer = document.getElementById('cpaOffers');
            const deviceType = detectDeviceType();
            
            // Show loading state
            offersContainer.innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <div style="color: #e50914; font-size: 1.2rem; margin-bottom: 10px;">
                        üîç Finding Best Offers For You...
                    </div>
                    <div style="color: #ccc;">Analyzing your device and location...</div>
                </div>
            `;
            
            try {
                // Get user location
                const locationData = await getUserLocation();
                
                // Fetch targeted offers
                const offers = await fetchOffers(deviceType, locationData.countryCode);
                
                // Display offers
                displayTargetedOffers(offers, deviceType, locationData);
                
            } catch (error) {
                console.error('Error loading offers:', error);
                displayFallbackOffers(deviceType);
            }
        }

        // Display targeted offers
        function displayTargetedOffers(offers, deviceType, locationData) {
            const offersContainer = document.getElementById('cpaOffers');
            
            let deviceIcon = 'üì±';
            let deviceText = 'Mobile';
            
            if (deviceType === 'ios') {
                deviceIcon = 'üì±';
                deviceText = 'iOS';
            } else if (deviceType === 'android') {
                deviceIcon = 'ü§ñ';
                deviceText = 'Android';
            } else {
                deviceIcon = 'üíª';
                deviceText = 'Desktop';
            }
            
            let offersHtml = `
                <div style="margin-bottom: 25px; text-align: center;">
                    <div style="color: #e50914; font-size: 1.1rem; margin-bottom: 10px;">
                        ${deviceIcon} Offers for ${deviceText} Users in ${locationData.city}
                    </div>
                    <div style="color: #aaa; font-size: 0.9rem;">
                        Choose any offer below to verify and access your movie
                    </div>
                </div>
            `;
            
            offers.slice(0, 3).forEach((offer, index) => {
                const offerValue = offer.payout ? `${offer.payout}` : 'Premium';
                const offerDesc = offer.description || offer.offer_name || 'Exclusive offer for movie access';
                
                offersHtml += `
                    <div style="padding: 20px; border: 2px solid #e50914; border-radius: 15px; margin: 15px 0; background: rgba(229, 9, 20, 0.05); transition: all 0.3s ease;" 
                         onmouseover="this.style.transform='scale(1.02)'; this.style.boxShadow='0 10px 30px rgba(229,9,20,0.3)'"
                         onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='none'">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h4 style="color: #e50914; margin: 0;">${offer.offer_name || `${deviceText} Verification ${index + 1}`}</h4>
                            <span style="background: #e50914; color: white; padding: 5px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: bold;">
                                ${offerValue} Value
                            </span>
                        </div>
                        <p style="color: #ccc; font-size: 0.9rem; margin-bottom: 15px; line-height: 1.4;">
                            ${offerDesc}
                        </p>                        <a href="${offer.offer_url}" target="_blank" 
                           class="download-btn" 
                           onclick="handleOfferClick('${offer.offer_id}', '${deviceType}', '${offer.offer_url}')"
                           style="width: 100%; margin: 0; text-decoration: none; display: inline-block;">
                            Complete Verification
                        </a>
                    </div>
                `;
            });
            
            offersContainer.innerHTML = offersHtml;
        }

        // Handle offer click
        function handleOfferClick(offerId, deviceType, offerUrl) {
            // Track the click
            trackOfferClick(deviceType, offerId);
            
            // Show completion message
            showOfferProgress(offerUrl);
        }        // Show offer progress
        function showOfferProgress(offerUrl) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                z-index: 2000;
                display: flex;
                align-items: center;
                justify-content: center;
            `;
            
            modal.innerHTML = `
                <div style="background: linear-gradient(135deg, #1a1a2e, #16213e); padding: 40px; border-radius: 20px; max-width: 500px; width: 90%; text-align: center; border: 1px solid rgba(255,255,255,0.1);">
                    <h3 style="color: #e50914; margin-bottom: 20px;">üîÑ Complete Verification</h3>
                    <div style="margin-bottom: 25px;">
                        <div style="background: #fff; border-radius: 10px; padding: 20px; margin-bottom: 20px;">
                            <div id="offerContent" style="width: 100%; height: 360px; overflow: auto;">
                                <div style="text-align: center;">
                                    <h4 style="color: #333; margin-bottom: 15px;">Verification Required</h4>
                                    <p style="color: #666; margin-bottom: 20px;">Please complete one of the following steps:</p>                                    <a href="${offerUrl}" target="_blank" 
                                       style="display: inline-block; background: #e50914; color: white; padding: 12px 25px; border-radius: 25px; text-decoration: none; margin-bottom: 15px;">
                                        Complete Verification
                                    </a>
                                    <p style="color: #888; font-size: 0.9em;">
                                        Click the button above to open the verification in a new window.<br>
                                        Return here after completion.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style="display: flex; justify-content: space-between; gap: 15px;">
                        <button onclick="this.parentElement.parentElement.parentElement.remove(); document.getElementById('verificationPage').style.display='block';" 
                                class="download-btn" style="background: transparent; border: 1px solid #666;">
                            ‚Üê Back
                        </button>
                        <button onclick="proceedToTelegram(); this.parentElement.parentElement.parentElement.remove();" 
                                class="download-btn">
                            I've Completed ‚úì
                        </button>
                    </div>
                </div>
            `;
              document.body.appendChild(modal);
        }

        // Show additional offers before proceeding to Telegram
        async function showAdditionalOffers() {
            const deviceType = detectDeviceType();
            const locationData = await getUserLocation();
            const offers = await fetchOffers(deviceType, locationData.countryCode);

            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.9); z-index: 2000; display: flex;
                align-items: center; justify-content: center;
            `;

            let offersHtml = offers.slice(0, 2).map((offer, index) => {
                const offerValue = offer.payout ? `${offer.payout}` : 'Premium';
                const offerDesc = offer.description || offer.offer_name || 'Exclusive offer';
                return `                <div style="padding: 15px; border: 2px solid #e50914; border-radius: 15px; margin: 10px 0; background: rgba(229, 9, 20, 0.05);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <h4 style="color: #e50914; margin: 0; font-size: 0.9rem;">${offer.offer_name || `Special Offer ${index + 1}`}</h4>
                            <span style="background: #e50914; color: white; padding: 3px 8px; border-radius: 20px; font-size: 0.8rem;">
                                ${offerValue} Value
                            </span>
                        </div>
                        <p style="color: #ccc; font-size: 0.8rem; margin-bottom: 10px; line-height: 1.4;">
                            ${offerDesc}
                        </p>
                        <a href="${offer.offer_url}" target="_blank" 
                           class="download-btn" style="width: 100%; margin: 0; padding: 8px; font-size: 0.9rem; text-decoration: none; display: inline-block;">
                            Get Now
                        </a>
                    </div>
                `;
            }).join('');

            modal.innerHTML = `
                <div style="background: linear-gradient(135deg, #1a1a2e, #16213e); padding: 30px; border-radius: 20px; text-align: center; max-width: 450px; border: 1px solid rgba(255,255,255,0.1);">
                    <h3 style="color: #e50914; margin-bottom: 15px;">üéâ Special Bonus Offers!</h3>
                    <p style="color: #ccc; margin-bottom: 20px; line-height: 1.5; font-size: 0.9rem;">
                        Unlock these exclusive offers before joining our Telegram community!
                    </p>
                    ${offersHtml}
                    <button onclick="this.parentElement.parentElement.remove(); proceedToTelegramFinal();" 
                            class="download-btn" style="margin-top: 15px;">
                        Skip & Continue to Telegram
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        // Final step to Telegram
        function proceedToTelegramFinal() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.9); z-index: 2000; display: flex;
                align-items: center; justify-content: center;
            `;
            
            modal.innerHTML = `
                <div style="background: linear-gradient(135deg, #1a1a2e, #16213e); padding: 40px; border-radius: 20px; text-align: center; max-width: 400px; border: 1px solid rgba(255,255,255,0.1);">
                    <h3 style="color: #e50914; margin-bottom: 20px;">üéâ Verification Complete!</h3>
                    <p style="color: #ccc; margin-bottom: 25px; line-height: 1.5;">
                        Join our exclusive Telegram community for instant access to your movie and thousands more!
                    </p>
                    <button onclick="window.open('https://t.me/Moviesvault4u_bot', '_blank');" 
                            class="download-btn" style="margin-bottom: 15px;">
                        üì± Join Telegram Community
                    </button>
                    <div style="color: #aaa; font-size: 0.8rem;">
                        Free access ‚Ä¢ No spam ‚Ä¢ Instant downloads
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        // Entry point for the verification completion flow
        function proceedToTelegram() {
            showAdditionalOffers();
        }        // Initialize session tracking
        function initializeSession() {
            if (!sessionStorage.getItem('session_id')) {
                sessionStorage.setItem('session_id', generateTrackingId());
            }
            
            // Track page view
            const pageViewData = {
                session_id: sessionStorage.getItem('session_id'),
                timestamp: new Date().toISOString(),
                device_type: detectDeviceType(),
                user_agent: navigator.userAgent,
                referrer: document.referrer
            };
            
            console.log('Page view tracked:', pageViewData);
            
            // Start engagement tracking
            trackUserEngagement();
        }

        function showAbout() {
            showInfoModal('About MovieVault', 'MovieVault is the world\'s leading platform for premium movie access. We provide instant, high-quality movie downloads to millions of users worldwide. Our advanced search technology ensures you find exactly what you\'re looking for.');
        }

        function showPrivacy() {
            showInfoModal('Privacy Policy', 'We respect your privacy and protect your personal information. We use cookies to enhance your experience and may share anonymous usage data to improve our services. Your movie preferences and downloads are kept confidential.');
        }

        function showTerms() {
            showInfoModal('Terms of Service', 'By using MovieVault, you agree to our terms. Our service is for personal use only. We provide access to publicly available content. Users must comply with local laws regarding content consumption.');
        }

        function showContact() {
            triggerPopUnder();
            showInfoModal('Contact Us', 'Need help? We\'re here 24/7!<br><br>üì± Telegram: @moviesvault_bot<br>üìß Email: support@movievault.com<br>üí¨ Live Chat: Available on our Telegram channel<br><br>Average response time: Under 5 minutes');
        }

        function showSupport() {
            showContact();
        }

        function showInfoModal(title, content) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.9); z-index: 2000; display: flex;
                align-items: center; justify-content: center;
            `;
            
            modal.innerHTML = `
                <div style="background: linear-gradient(135deg, #1a1a2e, #16213e); padding: 40px; border-radius: 20px; max-width: 500px; width: 90%; text-align: center; border: 1px solid rgba(255,255,255,0.1);">
                    <h3 style="color: #e50914; margin-bottom: 20px;">${title}</h3>
                    <p style="color: #ccc; margin-bottom: 25px; line-height: 1.6;">${content}</p>
                    <button onclick="this.parentElement.parentElement.remove();" 
                            class="download-btn">
                        Got It
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        // Social sharing functions
        function shareToFacebook() {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent('Check out this amazing movie download site! üé¨');
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${text}`, '_blank');
        }

        function shareToTwitter() {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent('Found an amazing site for movie downloads! üé¨üçø');
            window.open(`https://twitter.com/intent/tweet?url=${url}&text=${text}`, '_blank');
        }

        // Allow Enter key to search
        document.getElementById('movieInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchMovie();
            }
        });

        // Initialize page
        createParticles();
        checkUrlParams();
        initializeSession();

        // Pop-under functionality
        function triggerPopUnder() {
            // Optional: Implement pop-under behavior if needed
            console.log('Pop-under triggered');
        }

        // User engagement tracking
        function trackUserEngagement() {
            // Optional: Implement engagement tracking
            console.log('User engagement tracking started');
        }

        // Scroll to search function
        function scrollToSearch() {
            document.querySelector('.search-section').scrollIntoView({ behavior: 'smooth' });
        }

        // Popular movies, new releases, and genres placeholders
        function showPopularMovies() {
            showInfoModal('Popular Movies', 'This feature will be available soon. Join our Telegram community for instant access to trending movies!');
        }

        function showNewReleases() {
            showInfoModal('New Releases', 'This feature will be available soon. Join our Telegram community for the latest movie releases!');
        }

        function showGenres() {
            showInfoModal('Movie Genres', 'This feature will be available soon. Join our Telegram community to browse movies by genre!');
        }

        function showTelegramInfo() {
            showInfoModal('Join Our Telegram', 'Join our Telegram community for instant access to unlimited movies and exclusive content!<br><br>üì± Telegram: @moviesvault_bot');
        }
    </script>

    <!-- Professional Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3 class="footer-logo">MovieVault</h3>
                <p class="footer-description">Your ultimate destination for premium movie access. Join millions of users worldwide.</p>
                <div class="footer-stats">
                    <div class="stat">
                        <span class="stat-number">10M+</span>
                        <span class="stat-label">Movies Available</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number">5M+</span>
                        <span class="stat-label">Active Users</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number">150+</span>
                        <span class="stat-label">Countries</span>
                    </div>
                </div>
            </div>
            
            <div class="footer-section">
                <h4>Quick Access</h4>
                <ul class="footer-links">
                    <li><a href="#" onclick="scrollToSearch()">üîç Search Movies</a></li>
                    <li><a href="#" onclick="showPopularMovies()">üî• Popular Movies</a></li>
                    <li><a href="#" onclick="showNewReleases()">üÜï New Releases</a></li>
                    <li><a href="#" onclick="showGenres()">üé≠ Browse Genres</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h4>Community</h4>
                <ul class="footer-links">
                    <li><a href="#" onclick="triggerPopUnder(); showTelegramInfo()">üì± Join Telegram</a></li>
                    <li><a href="#" onclick="shareToFacebook()">üìò Facebook Group</a></li>
                    <li><a href="#" onclick="shareToTwitter()">üê¶ Follow Updates</a></li>
                    <li><a href="#" onclick="showSupport()">üí¨ Get Support</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h4>About</h4>
                <ul class="footer-links">
                    <li><a href="#" onclick="showAbout()">‚ÑπÔ∏è About Us</a></li>
                    <li><a href="#" onclick="showPrivacy()">üîí Privacy Policy</a></li>
                    <li><a href="#" onclick="showTerms()">üìã Terms of Service</a></li>
                    <li><a href="#" onclick="showContact()">üìß Contact</a></li>
                </ul>
            </div>
        </div>
        
        <div class="footer-bottom">
            <div class="footer-bottom-content">
                <p>&copy; 2025 MovieVault. All rights reserved. | Providing premium entertainment access worldwide.</p>
                <div class="footer-badges">
                    <span class="badge">üîí Secure</span>
                    <span class="badge">‚ö° Fast</span>
                    <span class="badge">üåç Global</span>
                    <span class="badge">üì± Mobile</span>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>